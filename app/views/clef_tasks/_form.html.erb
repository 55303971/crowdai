<div class="row">
  <%= form_for [@organizer,@clef_task],
        validate: true,
        html: { class: "sgl-col directUpload",
                'data-form-data' => @s3_direct_post.fields.to_json.html_safe,
                'data-url' => @s3_direct_post.url,
                'data-host' => URI.parse(@s3_direct_post.url).host } do |f| %>
    <fieldset>
      <label>Task</label>
      <%= f.text_field :task %>

      <label>End User Agreement file</label>
      <div class="upload">
        <% if @clef_task.eua_file.file.present? %>
          <span>You have already uploaded an EUA. If you wish to replace it, you can upload a new file</span>
          <%= link_to 'Current EUA', @clef_task.eua_file.file.url %>
        <% else %>
          <span>If this dataset requires an End User Agreement, you can upload it here</span>
        <% end %>
        <%= f.file_field :eua_file, class: 'file-upload' %>
        <span>PDF only, 5MB limit</span>
      </div>

      <div id='task-dataset-files'>
        <%= f.fields_for :task_dataset_files do |task_dataset_file| %>
          <%= render 'task_dataset_file_fields', f: task_dataset_file %>
        <% end %>
        <div class='links'>
          <%= link_to_add_association 'add file', f, :task_dataset_files %>
        </div>
      </div>

      <div class="button-group">
        <%= f.button (@clef_task.new_record? ? 'Add Task' : 'Update Task'), class: 'btn btn-primary' %>
        <%= link_to organizer_path(@organizer), class: "btn btn-secondary", validate: false do %>
          Cancel
        <% end %>
      </div>
    </fieldset>
  <% end %>
</div>
